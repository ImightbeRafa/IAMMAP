<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MrMap</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" crossorigin=""/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" crossorigin=""/>
    <link rel="stylesheet" href="/css/index.css">

    <!-- Fix for Leaflet.draw icons -->
    <style>
        .leaflet-draw-toolbar .leaflet-draw-draw-polygon { background-position: -31px -2px; }
        .leaflet-draw-toolbar .leaflet-draw-draw-rectangle { background-position: -62px -2px; }
        .leaflet-draw-toolbar .leaflet-draw-draw-circle { background-position: -92px -2px; }
        .leaflet-draw-toolbar .leaflet-draw-edit-edit { background-position: -152px -2px; }
        .leaflet-draw-toolbar .leaflet-draw-edit-remove { background-position: -182px -2px; }
    </style>
</head>
<body>
    <div class="map-container">
        <h1>Mr.Map <span class="version">v0.1.1</span></h1>
        <button id="aboutButton" class="about-button" aria-label="About MrMap">
            <i class="info-icon">â„¹</i>
        </button>
        <div id="map"></div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content about-modal">
            <span class="close">&times;</span>
            <h2>About Mr.Map</h2>
            
            <div class="about-section">
                <h3>Current Version</h3>
                <p class="version-number">v0.1.1</p>
                <p class="version-date">Last Updated: November 2024</p>
            </div>

            <div class="about-section">
                <h3>Description</h3>
                <p>Mr.Map is an interactive safety mapping tool for Costa Rica. Users can mark and share information about different areas, helping create a collaborative safety resource for travelers and residents.</p>
            </div>

            <div class="about-section">
                <h3>Features</h3>
                <ul class="feature-list">
                    <li>âœ“ Interactive map drawing</li>
                    <li>âœ“ Safety level indicators</li>
                    <li>âœ“ Community comments</li>
                    <li>âœ“ Real-time updates</li>
                </ul>
            </div>

            <div class="about-section">
                <h3>Upcoming Features</h3>
                <ul class="upcoming-list">
                    <li>ðŸ”œ User accounts</li>
                    <li>ðŸ”œ Safety statistics</li>
                    <li>ðŸ”œ Mobile app</li>
                    <li>ðŸ”œ Offline support</li>
                </ul>
            </div>

            <div class="about-section">
                <h3>Contact</h3>
                <p>For support or feedback, please contact us at: <a href="mailto:support@mrmap.xyz">support@mrmap.xyz</a></p>
            </div>
        </div>
    </div>

    <!-- Safety Level Modal -->
    <div id="safetyLevelModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Select Safety Level</h2>
            <div class="form-group">
                <label for="safetyLevel">Choose a safety level:</label>
                <select id="safetyLevel" class="safety-level-input" required>
                    <option value="">Select...</option>
                    <option value="green">Green - Safe</option>
                    <option value="yellow">Yellow - Caution</option>
                    <option value="red">Red - Danger</option>
                </select>
            </div>
            <div class="form-group">
                <label for="safetyMessage">Leave a message:</label>
                <textarea id="safetyMessage"
                    rows="4"
                    placeholder="Enter your message here..."
                    maxlength="500"
                ></textarea>
            </div>
            <button id="submitSafetyLevel" class="btn-submit">Submit</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js" crossorigin=""></script>
    <script src="/js/main.js" type="module"></script>

    <!-- Error handling -->
    <div id="error-container" class="error-message" style="display: none;"></div>

    <!-- Update notification container -->
    <div id="updateNotification" class="update-notification" style="display: none;">
        <p>A new version of Mr.Map is available!</p>
        <button onclick="window.location.reload()">Refresh to Update</button>
    </div>
</body>
</html>